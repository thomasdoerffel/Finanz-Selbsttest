<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dein Finanz‚ÄëSelbsttest ‚Äì Thomas D√∂rffel</title>
<style>
  :root{ --rose:#F5D5D5; --gold:#D4AF37; --anth:#2E2E2E; --bg:#ffffff; }
  *{box-sizing:border-box}
  body{ margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:#2E2E2E; background:#ffffff; }
  header{ background:linear-gradient(180deg, #F5D5D5, #fff); padding:24px 16px; text-align:center; border-bottom:4px solid #D4AF37; }
  h1{ margin:0 0 8px; font-size:clamp(22px, 4vw, 34px); }
  h2{ margin:24px 0 8px; font-size:clamp(18px, 3vw, 24px); }
  p.lead{ max-width:800px; margin:0 auto; font-size:clamp(14px, 2.2vw, 18px); }
  main{ max-width:920px; margin:24px auto; padding:0 16px 48px; }
  .card{ border:1px solid #eee; border-radius:16px; padding:20px; margin:16px 0; background:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.06); }
  .q{ margin:14px 0; }
  .q legend{ font-weight:600; margin-bottom:8px; }
  .opt{ display:flex; gap:12px; flex-wrap:wrap; }
  label.opt-item{ display:flex; gap:8px; align-items:center; background:#fafafa; padding:10px 12px; border-radius:12px; border:1px solid #eee; cursor:pointer; }
  input[type="radio"]{ accent-color:#D4AF37; }
  .actions{ display:flex; gap:12px; flex-wrap:wrap; margin-top:16px; }
  button, .btn{ background:#2E2E2E; color:#fff; border:none; padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:600; }
  button.secondary{ background:#fff; color:#2E2E2E; border:2px solid #2E2E2E; }
  .muted{ color:#666; font-size:14px }
  .result{ border-left:6px solid #D4AF37; padding-left:16px; }
  .badge{ display:inline-block; padding:6px 10px; border-radius:999px; background:#F5D5D5; border:1px solid #D4AF37; font-weight:600 }
  footer{ background:#faf7f7; border-top:1px solid #eee; padding:20px 16px; text-align:center; color:#555; }
  .small{ font-size:13px; color:#555 }
  .hr{ height:1px; background:#eee; margin:16px 0; }
  .contact{ display:grid; gap:12px; grid-template-columns:1fr; max-width:720px; }
  input[type="text"],input[type="email"],input[type="tel"], textarea{ width:100%; padding:12px 14px; border-radius:10px; border:1px solid #ddd; font-size:15px; }
  textarea{ min-height:110px }
  .pill{ background:#F5D5D5; padding:10px 12px; border-radius:12px; border:1px solid #D4AF37; }
  .success{ background:#ecfff1; border:1px solid #b2f0c2; color:#0a7a2a; padding:12px 14px; border-radius:12px; display:none; }
  .error{ background:#fff4f4; border:1px solid #f0b2b2; color:#7a0a0a; padding:12px 14px; border-radius:12px; display:none; }
</style>
</head>
<body>
<header>
  <h1>Dein Finanz‚ÄëSelbsttest</h1>
  <p class="lead">Finde heraus, wie fit deine Finanzen sind ‚Äì und wo noch Potenzial steckt. Beantworte 7 kurze Fragen und erhalte direkt eine pers√∂nliche Auswertung.</p>
</header>

<main>
  <section class="card">
    <h2>1) Beantworte diese 7 Fragen</h2>
    <form id="quiz" onsubmit="return false">
      <fieldset class="q">
        <legend>Wie viel sparst du im Monat?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="sparquote" value="2"> Ich spare regelm√§√üig und wei√ü genau wie viel.</label>
          <label class="opt-item"><input type="radio" name="sparquote" value="1"> Ich spare unregelm√§√üig oder nur grob gesch√§tzt.</label>
          <label class="opt-item"><input type="radio" name="sparquote" value="0"> Ich spare momentan nichts.</label>
        </div>
      </fieldset>

      <fieldset class="q">
        <legend>Hast du klare finanzielle Ziele?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="ziele" value="2"> Ich habe konkrete Ziele mit Zeit- und Finanzplan.</label>
          <label class="opt-item"><input type="radio" name="ziele" value="1"> Ich habe Ziele, aber keinen genauen Plan.</label>
          <label class="opt-item"><input type="radio" name="ziele" value="0"> Ich habe aktuell keine klaren Ziele.</label>
        </div>
      </fieldset>

      <fieldset class="q">
        <legend>Wie gut kennst du deine Versicherungen & Vertr√§ge?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="ueberblick" value="2"> Ich habe den vollen √úberblick (z. B. digital im Portal).</label>
          <label class="opt-item"><input type="radio" name="ueberblick" value="1"> Ich habe einen teilweisen √úberblick.</label>
          <label class="opt-item"><input type="radio" name="ueberblick" value="0"> Ich habe kaum oder gar keinen √úberblick.</label>
        </div>
      </fieldset>

      <fieldset class="q">
        <legend>Wie oft checkst du deine Finanzen?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="review" value="2"> Mindestens einmal im Jahr.</label>
          <label class="opt-item"><input type="radio" name="review" value="1"> Seltener als einmal im Jahr.</label>
          <label class="opt-item"><input type="radio" name="review" value="0"> Gar nicht oder nur, wenn es sein muss.</label>
        </div>
      </fieldset>

      <fieldset class="q">
        <legend>Kennst du deine Rentenl√ºcke?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="rente" value="2"> Ich kenne meine Rentenl√ºcke und habe einen Plan.</label>
          <label class="opt-item"><input type="radio" name="rente" value="1"> Ich wei√ü von meiner Rentenl√ºcke, habe aber keinen Plan.</label>
          <label class="opt-item"><input type="radio" name="rente" value="0"> Ich habe keine Ahnung von meiner Rentenl√ºcke.</label>
        </div>
      </fieldset>

      <fieldset class="q">
        <legend>Pr√ºfst du regelm√§√üig deine Tarife & Anbieter?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="wechsel" value="2"> Ich pr√ºfe einmal im Jahr m√∂gliche Tarif- oder Anbieterwechsel.</label>
          <label class="opt-item"><input type="radio" name="wechsel" value="1"> Ich pr√ºfe das unregelm√§√üig.</label>
          <label class="opt-item"><input type="radio" name="wechsel" value="0"> Ich pr√ºfe das gar nicht.</label>
        </div>
      </fieldset>

      <fieldset class="q">
        <legend>Wie gut ist dein finanzielles Sicherheitsnetz?</legend>
        <div class="opt">
          <label class="opt-item"><input type="radio" name="sicherheitsnetz" value="2"> Ich habe 3‚Äì6 Monatsausgaben als Puffer und meine Absicherung passt.</label>
          <label class="opt-item"><input type="radio" name="sicherheitsnetz" value="1"> Ich habe teilweise ein Sicherheitsnetz.</label>
          <label class="opt-item"><input type="radio" name="sicherheitsnetz" value="0"> Ich habe kaum oder gar kein Sicherheitsnetz.</label>
        </div>
      </fieldset>

      <div class="actions">
        <button id="calc" type="button">Ergebnis anzeigen</button>
        <button id="reset" type="reset" class="secondary">Zur√ºcksetzen</button>
      </div>
    </form>
  </section>

  <section id="resultSection" class="card" style="display:none">
    <h2>2) Deine Auswertung</h2>
    <div id="scoreBadge" class="badge">Score: 0/14</div>
    <div class="hr"></div>
    <div id="resultText" class="result"></div>
    <p class="small muted">Hinweis: Diese Einsch√§tzung ersetzt keine pers√∂nliche Beratung ‚Äì sie zeigt dir Potenziale und n√§chste Schritte.</p>
  </section>

  <section id="contactSection" class="card" style="display:none">
    <h2>3) Ergebnisse schicken & Kontakt aufnehmen</h2>
    <p class="pill">Ich melde mich kurzfristig bei dir mit konkreten Vorschl√§gen ‚Äì z.‚ÄØB. zu Einsparungen, besserer Planung oder dem Schlie√üen deiner Rentenl√ºcke.</p>

    <div id="notice-missing" class="error">Bitte erst die 7 Fragen beantworten und ‚ÄûErgebnis anzeigen‚Äú klicken.</div>
    <div id="notice-success" class="success">Danke ‚Äì deine Ergebnisse wurden gesendet. Ich melde mich kurzfristig bei dir.</div>
    <div id="notice-fail" class="error">Senden fehlgeschlagen. Bitte pr√ºfe die Felder oder versuche es sp√§ter erneut.</div>

    <form id="contactForm" class="contact">
      <input type="hidden" name="score" id="scoreHidden" value="">
      <div>
        <label for="name">Dein Name</label>
        <input id="name" name="name" type="text" placeholder="Max Mustermann" required>
      </div>
      <div>
        <label for="email">Deine E-Mail</label>
        <input id="email" name="email" type="email" placeholder="max@example.com" required>
      </div>
      <div>
        <label for="tel">Deine Telefonnummer</label>
        <input id="tel" name="tel" type="tel" placeholder="01522 3076830" required>
      </div>
      <div>
        <label for="msg">Nachricht (optional)</label>
        <textarea id="msg" name="message" placeholder="Dein Anliegen (z.‚ÄØB. Einsparung, Altersvorsorge, √úberblick √ºber Vertr√§ge)"></textarea>
      </div>
      <div class="actions">
        <button id="sendBtn" type="submit">Ergebnisse senden</button>
      </div>
      <p class="small">Direkter Kontakt: <b>Thomas D√∂rffel</b> ‚Äì Unternehmensberater f√ºr den privaten Haushalt ‚Ä¢ ‚úâÔ∏è thomas.doerffel@telis-finanz.de ‚Ä¢ üìû 01522 3076830 ‚Ä¢ Instagram: @thomas_doerffel</p>
    </form>
  </section>
</main>

<footer>
  <div class="small">¬© Thomas D√∂rffel ¬∑ Unternehmensberater f√ºr den privaten Haushalt</div>
</footer>

<script>
// === CONFIG ===
const FORMSPREE_ID = "f/movlbznq"; // deine Formspree-ID
const FORMSPREE_ENDPOINT = FORMSPREE_ID ? ("https://formspree.io/f/movlbznq" + FORMSPREE_ID) : "";

// === QUIZ LOGIC ===
const calcBtn = document.getElementById('calc');
const quizForm = document.getElementById('quiz');
const resultSection = document.getElementById('resultSection');
const contactSection = document.getElementById('contactSection');
const scoreBadge = document.getElementById('scoreBadge');
const resultText = document.getElementById('resultText');
const contactForm = document.getElementById('contactForm');
const scoreHidden = document.getElementById('scoreHidden');

function getScore(){
  const fields = ['sparquote','ziele','ueberblick','review','rente','wechsel','sicherheitsnetz'];
  let total = 0; let answers = {};
  for(const f of fields){
    const el = quizForm.querySelector('input[name="'+f+'"]:checked');
    answers[f] = el ? Number(el.value) : null;
    total += el ? Number(el.value) : 0;
  }
  return {total, answers};
}

function buildAdvice(total){
  if(total >= 11){
    return {
      title: "Du bist schon sehr gut aufgestellt ‚Äì jetzt geht‚Äôs an den Feinschliff",
      bullets: [
        "Optimier Zinsen, Kosten & Steueraspekte ‚Äì so bleibt mehr vom Ertrag.",
        "Check deine Rentenl√ºcke regelm√§√üig, um im Plan zu bleiben.",
        "Mach weiter mit dem j√§hrlichen Tarif-/Anbietercheck ‚Äì wir helfen dir dabei."
      ],
      cta: "Lass uns zusammen den Feinschliff machen ‚Äì wir finden sicher noch ein paar Extra-Potenziale."
    };
  } else if(total >= 6){
    return {
      title: "Gute Basis ‚Äì da geht noch einiges",
      bullets: [
        "Definiere klare Ziele & kenne deine Rentenl√ºcke ‚Äì der Plan ist die halbe Miete.",
        "B√ºndel deine Vertr√§ge und nutze das Mandantenportal.",
        "F√ºhr einen j√§hrlichen Wechselcheck ein ‚Äì Tarife vergleichen, Kosten senken."
      ],
      cta: "Wir erstellen mit dir eine strukturierte Haushaltsanalyse und setzen die wichtigsten Schritte direkt um."
    };
  } else {
    return {
      title: "Zeit loszulegen ‚Äì mit einfachen Schritten viel erreichen",
      bullets: [
        "Schaff dir einen √úberblick √ºber Einnahmen/Ausgaben, Notgroschen & Absicherungen.",
        "Finde heraus, wie gro√ü deine Rentenl√ºcke ist, und starte mit einem Vorsorgeplan.",
        "Senke Kosten schnell durch Vertragspr√ºfungen und Anbieterwechsel."
      ],
      cta: "Wir begleiten dich vom √úberblick bis zur Umsetzung ‚Äì Schritt f√ºr Schritt und alles aus einer Hand."
    };
  }
}

calcBtn.addEventListener('click', function(){
  const {total, answers} = getScore();
  if(Object.values(answers).some(v => v === null)){
    alert("Bitte beantworte alle Fragen.");
    return;
  }
  scoreBadge.textContent = "Score: " + total + "/14";
  scoreHidden.value = total + "/14";
  const adv = buildAdvice(total);
  resultText.innerHTML = "<h3>"+adv.title+"</h3><ul>"+adv.bullets.map(b=>"<li>"+b+"</li>").join("")+"</ul><p><strong>"+adv.cta+"</strong></p>";
  resultSection.style.display = 'block';
  contactSection.style.display = 'block';
  window.scrollTo({top: resultSection.offsetTop - 12, behavior:'smooth'});
});

// === FORMSPREE SUBMIT (AJAX) ===
const noticeMissing = document.getElementById('notice-missing');
const noticeSuccess = document.getElementById('notice-success');
const noticeFail = document.getElementById('notice-fail');

contactForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  if(!scoreHidden.value){
    noticeMissing.style.display = 'block';
    setTimeout(()=> noticeMissing.style.display='none', 3000);
    return;
  }
  if(!FORMSPREE_ENDPOINT){
    alert("Formspree ist noch nicht konfiguriert. Bitte trage deine Form-ID oben in der Datei ein (FORMSPREE_ID).");
    return;
  }

  const formData = new FormData(contactForm);
  const {total} = getScore();
  formData.append("score_raw", String(total));
  formData.append("_subject", "Finanz‚ÄëSelbsttest ‚Äì neuer Lead");
  formData.append("_replyto", document.getElementById('email').value);

  try {
    const res = await fetch(FORMSPREE_ENDPOINT, {
      method: "POST",
      headers: { "Accept": "application/json" },
      body: formData
    });
    if (res.ok) {
      noticeSuccess.style.display = 'block';
      noticeFail.style.display = 'none';
      contactForm.reset();
      scoreHidden.value = "";
      window.scrollTo({top: contactSection.offsetTop - 12, behavior:'smooth'});
    } else {
      noticeFail.style.display = 'block';
      noticeSuccess.style.display = 'none';
    }
  } catch (err) {
    noticeFail.style.display = 'block';
    noticeSuccess.style.display = 'none';
  }
});
</script>
</body>
</html>
